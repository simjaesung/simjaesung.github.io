{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/middle-ware/","result":{"data":{"markdownRemark":{"html":"<h2>Express 프레임워크</h2>\n<p>해당 글의 주제인 미들웨어를 알아보기 전에 먼저 Node.js 에서 제공하는 Express에 대해 알아보겠습니다.</p>\n<p>Node.js의 Express 프레임워크는 웹 애플리케이션과 API를 구축하는데 널리 사용되는 강력한 도구입니다.</p>\n<p><strong>“Node.js 로 백엔드 개발이 가능하다!”</strong> 이는 아마도 Express 프레임워크 덕분이지 않을까 생각이 듭니다.\n<br/></p>\n<p>성능도 꽤 좋다고 알려져있습니다!\n구글 개발자 형님들이 Javascript 런타임인 V8엔진을 워낙 기가막히게 만들었기 때문이 아닐까 생각이 드네요. (아마 Node.js 가장 큰 특징인 싱글스레드, 비동기 논블로킹I/O가 한 몫을 하지 않았을까?)\n<br/></p>\n<p>아무튼 이러한 특성들로 인해 Express는 웹 개발에서 강력한 도구로 자리잡았습니다.</p>\n<p>특히 오늘의 글 주제인 미들웨어 시스템은 Express의 핵심 기능 중 하나로, 개발자들에게 큰 유연성을 제공합니다.</p>\n<hr/>\n<h2>미들웨어?</h2>\n<blockquote>\n<p>그래서 미들웨어가 뭔데?</p>\n</blockquote>\n<ol>\n<li>\n<p><strong>우선 미들웨어는 함수이자 express의 핵심입니다.</strong>\n(미들웨어가 express의 전부라 해도 이상하지 않을 정도..)\n<br/></p>\n</li>\n<li>\n<p><strong>미들웨어의 미들(middle) 은 단어 뜻 그대로 중간에 위치하기 때문에 이런 이름이 붙여지게 된 것입니다.</strong></p>\n<p>어디 중간에 있냐면? 바로 **요청(request)**과 <strong>응답(response)</strong> 사이에 위치합니다.</p>\n<p>대강 그림을 그려보면 아래와 같습니다.</p>\n<p><img src=\"https://velog.velcdn.com/images/simsorry/post/b14d248f-343a-4361-ab34-4438ffa3cffd/image.png\" alt=\"\"></p>\n<p>미들웨어는 해당 위치에 존재하면서 요청과 응답을 조작하여 기능을 추가하기도, 나쁜 요청을 걸러내기도 합니다.\n<br/></p>\n</li>\n<li>\n<p>주로 사용되는 매개변수는 4개가 있습니다. <code>req,res,next,err</code></p>\n<ul>\n<li>\n<p><code>req</code>는 클라이언트로부터의 HTTP 요청을, <code>res</code>는 서버에서 클라이언트로 보내는 HTTP 응답을 나타냅니다.</p>\n</li>\n<li>\n<p><code>err</code> 는 에러처리 미들웨어에서 주로 사용되는 인자로, 에러처리가 쉽게 되도록 도와줍니다.</p>\n</li>\n<li>\n<p>마지막으로 <code>next</code> 는 미들웨어간의 사이클이 이루어질 수 있도록 도와주는 녀석입니다.\n<br/></p>\n</li>\n</ul>\n</li>\n</ol>\n<hr/>\n<h2>미들웨어 사용방식</h2>\n<p>미들웨어는 <code>app.use</code>와 함께 사용됩니다.</p>\n<p><code>app.use(미들웨어)</code> 의 모양을 가지고 있습니다.</p>\n<br/>\n<p><strong>미들웨어가 실행되는 형태</strong></p>\n<table>\n<thead>\n<tr>\n<th>미들웨어가 실행되는 형태</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>app.use(미들웨어)</code></td>\n<td>모든 요청에서 미들웨어 실행</td>\n</tr>\n<tr>\n<td><code>app.use(’/abc’,미들웨어)</code></td>\n<td>abc 경로로 들어오는 요청에 미들웨어 실행</td>\n</tr>\n<tr>\n<td><code>app.post(’/abc’,미들웨어)</code></td>\n<td>abc 경로로 들어오는 post 요청에서 미들웨어 실행</td>\n</tr>\n</tbody>\n</table>\n<p>위 형태를 보면 미들웨어가 왜 함수인지 알 수 있습니다.</p>\n<ul>\n<li>\n<p><code>use</code> 함수에 대해서는 모든 요청에 대한 응답</p>\n</li>\n<li>\n<p>하지만 첫번째 파라미터로 요청 주소를 기입할 시 해당 주소에 요청된거만 응답</p>\n</li>\n<li>\n<p>더불어 <code>post</code>, <code>get</code>, <code>delete</code> 등등 다른 <strong>HTTP의 메서드</strong>를 붙여주면 그 범위를 더 좁힐 수 있습니다.</p>\n</li>\n</ul>\n<p><br/><hr/></p>\n<h2>미들웨어의 역할</h2>\n<p>미들웨어의 역할을 조금 더 자세히 알아보도록 하겠습니다.</p>\n<p>미들웨어의 주 역할은 아래 4가지라고 말할 수 있습니다.</p>\n<br/>\n<ol>\n<li><strong>모든 코드 실행</strong></li>\n</ol>\n<ul>\n<li>미들웨어는 요청이 들어오면 어떤 JavaScript 코드든 실행할 수 있습니다.</li>\n<li>요청이 들어올 때마다, 로그 기록, DB 쿼리문 수행 등등을 시킬 수 있습니다.</li>\n</ul>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"jsx\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">((</span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">req</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">res</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">=&gt;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">console</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">log</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">`지금 날짜는 ${</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-10\">new</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\"> </span><span class=\"grvsc-tiszgT-10 grvsc-t4tStz-10\">Date</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">()}`</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">})</span></span></span></code></pre>\n<br/>\n<ol start=\"2\">\n<li><strong>요청 및 응답 객체를 변경</strong></li>\n</ol>\n<ul>\n<li>미들웨어는 요청(req) 객체와 응답(res) 객체에 접근하여 이를 수정할 수 있습니다.</li>\n<li>요청 객체를 수정하여 데이터나 속성을 포함시키거나, 응답 객체를 수정하여 헤더를 설정하거나 내용을 추가할 수 있습니다.</li>\n</ul>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"jsx\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">((</span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">req</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">res</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">=&gt;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  req.requestTime </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">Date</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">now</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">() </span><span class=\"grvsc-tiszgT-6 grvsc-t4tStz-2\">// 요청 객체에 새로운 속성 추가</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  res.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">setHeader</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;X-Powered-By&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;Express&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-6 grvsc-t4tStz-2\">// 응답 헤더 설정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">})</span></span></span></code></pre>\n<br/>\n<ol start=\"3\">\n<li><strong>요청-응답 주기 종료</strong></li>\n</ol>\n<ul>\n<li>미들웨어는 요청-응답 주기를 완전히 종료할 수 있습니다.</li>\n<li>이는 클라이언트에게 응답을 보내거나, 리다이렉션을 수행하는 등의 방법으로 이루어집니다.</li>\n<li>주기를 종료하면, 해당 요청에 대해 더 이상의 미들웨어나 라우트 핸들러가 실행되지 않습니다.</li>\n</ul>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"jsx\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">((</span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">req</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">res</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">=&gt;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">if</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> (</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">!</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">req.headers.authorization) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    res.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">status</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">401</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">).</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">send</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;Unauthorized&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-6 grvsc-t4tStz-2\">// 요청-응답 주기 종료</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">return</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-6 grvsc-t4tStz-2\">// 다음 미들웨어로 진행하지 않음</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">})</span></span></span></code></pre>\n<br/>\n<ol start=\"4\">\n<li><strong>다음 미들웨어 함수 호출</strong></li>\n</ol>\n<ul>\n<li>\n<p>미들웨어는 <code>next()</code> 함수를 호출하여 다음 미들웨어로 제어를 넘길 수 있습니다.</p>\n</li>\n<li>\n<p>이는 미들웨어 체인을 따라 요청이 처리되도록 합니다.</p>\n<ul>\n<li>\n<p><strong>미들웨어 체인이란?</strong>\n여러 미들웨어를 연결하여 사용하는 방식을 뜻하는 용어입니다.</p>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"jsx\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  (</span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">req</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">res</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">=&gt;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">console</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">log</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;첫 번째 미들웨어&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  (</span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">req</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">res</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">=&gt;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">console</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">log</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;두 번째 미들웨어&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">    </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span></code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p><code>next()</code>를 호출하지 않으면, 요청 처리가 해당 미들웨어에서 멈추게 됩니다.</p>\n</li>\n</ul>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"jsx\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">((</span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">req</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">res</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">=&gt;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">console</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">log</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;첫 번째 미들웨어&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">() </span><span class=\"grvsc-tiszgT-6 grvsc-t4tStz-2\">// 다음 미들웨어로 제어 넘김</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">((</span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">req</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">res</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">=&gt;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">console</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">log</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;두 번째 미들웨어&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">})</span></span></span></code></pre>\n<p><br/><hr/></p>\n<h2><strong>여러 서드파티 미들웨어</strong></h2>\n<p>Express 생태계에는 많은 유용한 서드파티 미들웨어가 존재합니다.</p>\n<h3>1. <code>morgan 미들웨어</code></h3>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"jsx\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">const</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">morgan</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">require</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;morgan&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">morgan</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;dev&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">))</span></span></span></code></pre>\n<ul>\n<li>\n<p>요청과 응답에 대한 정보를 콘솔에 기록</p>\n</li>\n<li>\n<p>인수로는 <code>dev</code>이외에 <code>combined</code>, <code>short</code>, <code>tiny</code>등이 존재</p>\n<ul>\n<li>내가 참고한 자료에서는 대게 개발환경에서는 <code>dev</code>, 배포 환경에서는 <code>combined</code>를 애용한다고 하네요..!</li>\n</ul>\n</li>\n<li>\n<p><code>dev</code> 출력 결과\n<img src=\"https://velog.velcdn.com/images/simsorry/post/98ed6e96-ab45-4c94-a0d9-4199e059dd80/image.png\" width=\"45%\" height=\"n%\"></p>\n</li>\n<li>\n<p><code>combined</code> 출력 결과\n<img src=\"https://velog.velcdn.com/images/simsorry/post/84c4ede3-adba-4f36-8c00-1584a98e9b8a/image.png\" alt=\"\"></p>\n</li>\n</ul>\n<br/>\n<h3>2. <code>static 미들웨어</code></h3>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"jsx\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(express.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">static</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">__dirname</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">+</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;/public&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">))</span></span></span></code></pre>\n<ul>\n<li>static 미들웨어는 정적파일들을 제공하는 라우터 역할</li>\n<li>기본적으로 expree에 의해 제공되기에 별도로 설치할 필요가 없음</li>\n<li>함수의 인수로 정적 파일들이 담겨 있는 폴더를 지정하면 설정 완료</li>\n</ul>\n<br/>\n<h3>3. <code>body-parser 미들웨어</code></h3>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"jsx\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(express.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">json</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">())</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(express.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">urlencoded</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">({ extended: </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">true</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> }))</span></span></span></code></pre>\n<ul>\n<li>\n<p>요청(req) 에 본문에 있는 데이터를 해석하여 req.body 객체에 담아주는 미들웨어</p>\n</li>\n<li>\n<p>express에 내장되어있으므로 따로 설치할 필요는 없음</p>\n</li>\n<li>\n<p><strong>이를 통해 우리가 데이터교환이 더 쉽게 가능해지는 것</strong></p>\n</li>\n<li>\n<p>보통 폼 데이터나 AJAX 요청의 데이터를 처리</p>\n</li>\n<li>\n<p>이미지,동영상,파일 데이터 등은 처리는 불가</p>\n<ul>\n<li>이는 <code>multer</code> 모듈을 통해 처리가 가능하다고 합니다.</li>\n</ul>\n</li>\n<li>\n<p><code>extended:</code></p>\n<ul>\n<li><code>extended: true</code> : qs모듈을 사용하여 쿼리 스트링 해결</li>\n<li><code>extended: false</code> : 노드의 querystring모듈을 사용하여 쿼리스트링 해결</li>\n</ul>\n</li>\n</ul>\n<br/>\n<p>우선 직접 사용해 본 서드파티만 자세히 작성해보았으며,</p>\n<p>위 작성한 미들웨어 이외에도 다양한 서드파티 미들웨어들이 존재합니다.</p>\n<ul>\n<li>\n<p><strong>cookie-parser 미들웨어</strong> : <code>req</code>에 동봉된 쿠키를 해석해 <code>req.cookies</code> 객체로 만들어주는 미들웨어</p>\n</li>\n<li>\n<p><strong>exoress-session 미들웨어</strong> : 세션 관리용 미들웨어. 로그인 등의 기능을 구현할 때 사용하는 세션을 사용자 별로 <code>req.session</code> 객체 안에 유지시켜주는 미들웨어</p>\n</li>\n<li>\n<p><strong>multer 미들웨어</strong> : 이미지, 동영상, 파일 데이터 등을 처리해주는 미들웨어</p>\n</li>\n</ul>\n<p><br/><hr/></p>\n<h2><strong>에러처리 미들웨어</strong></h2>\n<p>에러 처리는 Express 애플리케이션에서 중요한 부분입니다.</p>\n<p>Express는 기본적인 에러 처리 기능을 제공하지만, 커스텀 에러 처리 미들웨어를 사용하면 더 세밀한 제어가 가능합니다.</p>\n<p>그리고 일반적으로 파일 가장 마지막에 위치시킨다고 합니다.</p>\n<br/>\n<p><strong>기본 에러 처리 미들웨어</strong></p>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"jsx\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">((</span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">err</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">req</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">res</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">=&gt;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">console</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">log</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(err)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  res.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">status</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">500</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">).</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">send</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(err.message)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">})</span></span></span></code></pre>\n<p>이 미들웨어는 애플리케이션에서 발생하는 모든 에러를 캐치하고 처리합니다.\n<code>next(error)</code>를 통해 전달된 에러는 이 미들웨어에서 처리된다고 보면 될 것 같습니다.</p>\n<br/>\n<p><strong>커스텀 에러 생성 및 전달</strong></p>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"jsx\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">((</span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">req</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">res</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">=&gt;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">const</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">error</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">new</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-10 grvsc-t4tStz-1\">Error</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;인증 불가&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  error.status </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">401</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(error)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">})</span></span></span></code></pre>\n<p>이 예제는 특정 조건에서 커스텀 에러를 생성하고 <code>next()</code>를 통해 에러 처리 미들웨어로 전달하는 방법입니다.</p>\n<br/>\n<p><strong>실전 에러 처리 미들웨어</strong></p>\n<p>실제 개발에서는 조금 더 복잡한 에러처리가 필요할 수 있습니다.</p>\n<p>해당 예제는 좀 더 상세한 에러처리 미들웨어 예시입니다.</p>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"jsx\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">((</span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">req</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">res</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">=&gt;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">const</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">error</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">new</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-10 grvsc-t4tStz-1\">Error</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">`${</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-10\">res</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">.</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-10\">method</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">} ${</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-10\">req</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">.</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-10\">url</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">} 라우터가 없습니다.`</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  error.status </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">404</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(error)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">app.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">use</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">((</span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">err</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">req</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">res</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-11 grvsc-t4tStz-6\">next</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) </span><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">=&gt;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  res.locals.message </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> err.message</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  res.locals.error </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">=</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">process</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">env</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-1\">NODE_ENV</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">!==</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;production&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">?</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> err </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">:</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> {}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  res.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">status</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(err.status </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">||</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-3\">500</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  res.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">render</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;error&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">})</span></span></span></code></pre>\n<ul>\n<li>\n<p>요청된 라우트가 없을 경우 404 에러를 생성하고 이를 error 처리 미들웨어에 넘겨줍니다.</p>\n</li>\n<li>\n<p>error 처리 미들웨어는 발생한 모든 에러를 처리하며, 개발 환경에서는 상세한 에러 정보를, 프로덕션 환경에서는 제한된 정보만 제공합니다.</p>\n</li>\n</ul>\n<p><br/><hr/></p>\n<h2>결론</h2>\n<p>Express의 미들웨어는 강력하고 유연한 도구로, 웹 애플리케이션의 핵심 기능을 모듈화하고 확장하는데 중요한 역할을 합니다.</p>\n<p>미들웨어 순서, 한 기능에 집중하는 작은 미들웨어 함수, 비동기 작업 시 적절한 <code>next()</code> 호출, 유연한 에러처리 등등을 유의하며 미들웨어를 사용한다면, 견고하고 유지보수가 쉬운 Node.js 애플리케이션을 구축할 수 있을 것이라고 생각이 듭니다!</p>\n<hr/>\n<h2>참고</h2>\n<ul>\n<li><strong>Node.js 교과서</strong> <strong>: 기본기에 충실한 노드제이에스 14 입문서</strong></li>\n<li><a href=\"https://lakelouise.tistory.com/211\">https://lakelouise.tistory.com/211</a></li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .github-light-theme {\n    background-color: #ffffff;\n    color: #000000;\n  }\n  .github-light-theme .grvsc-tiszgT-1 { color: #000000; }\n  .github-light-theme .grvsc-tiszgT-7 { color: #005CC5; }\n  .github-light-theme .grvsc-tiszgT-11 { color: #E36209; }\n  .github-light-theme .grvsc-tiszgT-5 { color: #D73A49; }\n  .github-light-theme .grvsc-tiszgT-8 { color: #032F62; }\n  .github-light-theme .grvsc-tiszgT-10 { color: #6F42C1; }\n  .github-light-theme .grvsc-tiszgT-6 { color: #6A737D; }\n  .github-light-theme .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n  body[data-theme=dark] .grvsc-ps-t4tStz { color: #ffffff; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-1 { color: #FFFFFF; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-5 { color: #BB97E7; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-6 { color: #F39961; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-9 { color: #EB7E81; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-3 { color: #66B5F6; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-10 { color: #9DCDF5; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-2 { color: #A19B8F; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","frontmatter":{"title":"Express의 본체, 미들웨어에 대해 알아보자","desc":"Express 미들웨어에 대해 알아보자!","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABP0lEQVR42p2S3UrDQBCF+/TiM/gIXnndW70VUdGCCMUGYtqmMV13d/Ynu8edbQvWJEW6sBBmznx7ZjITnHXiaGbyVxYHxPEkYgTovIPRBp4ctNZQSsEY0yvwXQdFHYzt4L3Pt0uxHtCSxZLWeNcfyc7OD0OdtRDKoPkmWOtRL+eQ5TXa6g5kXM5LKVNJPAays7kq8Chf0TqBB/kCqSQouSUy2a3WDp/FE/TiEqK8Obyb8oQQwjGQNEE5jcqu0bgW9/I5A0O3E8YYwJ+rcobl7AKbxQEY84h6Dq22KFWFaXMLH3yOCSHybVqB+kuk1ii1/Ia4uQJtpgh7hwzsObRpFia1xnNjiE5tsJBtGB+gXdjPVaJeFajXFdrtNuu55cG14cOzYuDoBv76YdsEZGeH2CBwqLi/yv9c7CHQqceGdD9CG13sPBUgMQAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/a1bacacde1d50367c433776fd272f078/9122a/mw.png","srcSet":"/static/a1bacacde1d50367c433776fd272f078/9122a/mw.png 1688w","sizes":"1688px"},"sources":[{"srcSet":"/static/a1bacacde1d50367c433776fd272f078/6aac4/mw.webp 1688w","type":"image/webp","sizes":"1688px"}]},"width":1688,"height":964}}},"date":"2024-09-01","category":"Node.js"}}},"pageContext":{"slug":"/blog/middle-ware/"}},"staticQueryHashes":["1840460387"],"slicesMap":{}}